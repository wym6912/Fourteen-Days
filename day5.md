## 第 5 天 线段树\(I\) 线段树绪论 点修改 区间修改

今天是来自 XDU 的 V8 老师，他讲的是博弈论和单调队列。能听懂简单的博弈论，搞不懂单调队列。真的气。

[提高班第 5 天练习题](https://vjudge.net/contest/176855)

[入门班第 7 天练习题](/vjudge.net/contest/177478)

于是我...就去看了看线段树了。

开始今天的正题吧。

#### 1. 线段树概论

线段树是一种可以修改或者查询\(离散的\)区间上的一些信息，进行查询。

在一类问题中，我们需要经常处理可以映射在一个坐标轴上的一些固定线段，例如说映射在OX轴上的线段。由于线段是可以互相覆盖的，有时需要动态地取线段的并，例如取得并区间的总长度，或者并区间的个数等等。一个线段是对应于一个区间的，因此线段树也可以叫做区间树。

线段树是一棵二叉树，树中的每一个结点表示了一个区间$$[a, b]$$。每一个叶子节点表示了一个单位区间。对于每一个非叶结点所表示的结点$$[a, b]$$，其左儿子表示的区间为$$[a, \frac {a+b} {2}]$$，右儿子表示的区间为$$[ \frac {a+b} {2}, b]$$。 见下图所示。

![](/PIC_Day5_1.png)

可以证明任意区间 \(1到N范围内\) 最多只需要$$O(\log {N})$$个线段树的节点区间拼接而成，加上线段树的深度是$$O(\log {N})$$,所以上述以及类似区间型操作可以在对数时间内完成。

线段树的每个节点上往往都增加了一些其他的域。在这些域中保存了某种动态维护的信息，视不同情况而定。这些域使得线段树具有极大的灵活性，可以适应不同的需求。

在第 5 天和第 6 天中，我们将线段树按照查询和修改的情况，分为  点修改区间查询 、区间修改点查询、区间修改区间查询、RMQ与LCA、线段树问题转换 等方面。

那么，我们开始走进线段树的旅程吧。

#### 2. 线段树的单点修改、区间查询

问一个很简单的问题：为什么线段树不能做单点修改单点查询？\(数组对于这种操作只需要$$O(1)$$，而线段树则需要$$O(\log {N})$$，太不划算了233333\)



